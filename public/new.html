<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>New Entry</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="style.css">

</head>

<body>

  <nav>
    <a href="/journal">Journal</a>
  </nav>

  <main>

    <form id="entry-form" method="POST" enctype="multipart/form-data" action="/api/entries">
      <textarea name="text" id="text" placeholder="In twenty years, what will I want to remember about today?" autocomplete="off" maxlength="200" required autofocus></textarea>

      <div id="date-picker">
        <label for="date">Date</label>
        <input type="date" id="date" name="date" value="1969-04-20" required>
      </div>

      <input name="photo" id="photo" type="file" accept="image/*">
      <label for="photo" id="photo-label" class="btn" tabindex="0">Upload Photo</label>

      <input type="submit" name="submit" class="btn" value="Submit">
    </form>

  </main>

  <script>

    var photoLabel = document.getElementById("photo-label")
    var photo = document.getElementById("photo")
    var textArea = document.getElementById("text")

    text.onkeydown = (e) => {
      if (e.key === "Enter") {
        e.preventDefault()
      }
    }

    photoLabel.onkeydown = (e) => {
      if (e.key === "Enter") {
        e.preventDefault()
        document.getElementById("photo").click()
      }
    }

    photo.onchange = function(e) {
      if (this.value.length > 0) {
        photoLabel.textContent = "Change Photo"
      } else {
        photoLabel.textContent = "Upload Photo"
      }
    }

    // A list of prompts
    var prompts = [
      "In twenty years, what will I want to remember about today?",
      "What was one fun about today?",
      "What conversations did you have today?",
      "What was one unique thing about today?",
      "What brought you joy today?",
      "What inspired you today?",
      "What would you change about today if you had the choice?",
      "Was today a good day?"
    ]

    // Change the placeholder to a random prompt
    textArea.placeholder = prompts[Math.floor(Math.random() * prompts.length)]

    // Change date-picker default date to today
    let date = document.getElementById("date")
    let now = new Date(Date.now())
    date.valueAsNumber = Date.now()

  </script>

</body>
</html>
